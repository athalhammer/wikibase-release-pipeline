{
	"$schema": "./node_modules/nx/schemas/nx-schema.json",
	"installation": {
		"version": "19.5.0",
		"plugins": {
			"@nx/js": "19.5.0",
			"nx/plugins/package-json": "19.5.0"
		}
	},
	"release": {
		"groups": {
			"images": {
				"projects": [ "build/*" ]
			},
			"deploy": {
				"projects": [ "deploy" ]
			}
		},
		"projectsRelationship": "independent",
		"version": {
			"conventionalCommits": true
		},
		"changelog": {
			"projectChangelogs": true,
			"createRelease": "github"
		}
	},
	"targetDefaults": {
		"lint": {
			"executor": "nx:run-commands",
			"options": {
				"command": "./lint.sh {projectRoot}"
			}
		},
		"build": {
			"executor": "nx:run-commands",
			"options": {
				"command": "cd {projectRoot} && export $(grep -v '^#' build.env | xargs) && docker buildx bake --load"
			}
		},
		"test": {
			"executor": "nx:run-commands",
			"options": {
				"command": "cd test && NODE_NO_WARNINGS=1 node --require ts-node/register --loader=ts-node/esm cli.ts"
			}
		},
		"nx-release-publish": {
			"executor": "nx:run-commands",
			"options": {
				"command": "echo \"WOULD RUN: cd {projectRoot} && docker compose --env-file build.env push\""
			}
		},
		"update-commits": {
			"executor": "nx:run-commands",
			"options": {
				"command": "python3 build/update_commits.py {projectRoot}/build.env"
			}
		}
	}
}
